<!DOCTYPE HTML>
<html lang="fr">
<head>
<!-- Generated by javadoc (21) on Fri Jan 23 16:39:09 CET 2026 -->
<title>FeignExceptionHandler (clientui 0.0.1-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2026-01-23">
<meta name="description" content="declaration: package: com.clientui.clientui.exception, class: FeignExceptionHandler">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/FeignExceptionHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.clientui.clientui.exception</a></div>
<h1 title="Class FeignExceptionHandler" class="title">Class FeignExceptionHandler</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.clientui.clientui.exception.FeignExceptionHandler</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@ControllerAdvice
</span><span class="modifiers">public class </span><span class="element-name type-name-label">FeignExceptionHandler</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Global exception handler for <code>FeignException</code> in the ClientUI application.
 This class is responsible for intercepting and processing exceptions thrown by Feign clients,
 providing appropriate error handling and user feedback for HTTP errors (e.g., 400, 409, 500, 503).
 It also manages the retrieval of patient data, notes, and risk levels in case of errors,
 and redirects users to relevant views with error messages.

 <p>This handler is annotated with <code>ControllerAdvice</code>, making it applicable to all controllers in the application.
 It specifically addresses:</p>
 <ul>
   <li>HTTP 400 (Bad Request): Validation errors (e.g., invalid patient data).</li>
   <li>HTTP 409 (Conflict): Duplicate entries or conflicts.</li>
   <li>HTTP 500/503 (Server Errors): Service unavailability or internal errors.</li>
 </ul>

 <p>In case of errors, it retrieves the latest available patient data, notes, and risk level (if possible)
 and redirects the user to the appropriate view with contextual error messages.</p></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><code>FeignException</code></li>
<li><code>ControllerAdvice</code></li>
<li><code>ModelAndView</code></li>
<li><a href="../beans/PatientBean.html" title="class in com.clientui.clientui.beans"><code>PatientBean</code></a></li>
<li><a href="../beans/NoteBean.html" title="class in com.clientui.clientui.beans"><code>NoteBean</code></a></li>
<li><a href="../beans/RiskLevelBean.html" title="class in com.clientui.clientui.beans"><code>RiskLevelBean</code></a></li>
<li><a href="../proxies/MicroservicesProxy.html" title="interface in com.clientui.clientui.proxies"><code>MicroservicesProxy</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">FeignExceptionHandler</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.springframework.web.servlet.ModelAndView</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#handleFeignException(feign.FeignException,jakarta.servlet.http.HttpServletRequest)" class="member-name-link">handleFeignException</a><wbr>(feign.FeignException&nbsp;e,
 jakarta.servlet.http.HttpServletRequest&nbsp;request)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Handles exceptions of type <code>FeignException</code> thrown during Feign client calls in the context of patient management.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>FeignExceptionHandler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">FeignExceptionHandler</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="handleFeignException(feign.FeignException,jakarta.servlet.http.HttpServletRequest)">
<h3>handleFeignException</h3>
<div class="member-signature"><span class="annotations">@ExceptionHandler(feign.FeignException.class)
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">org.springframework.web.servlet.ModelAndView</span>&nbsp;<span class="element-name">handleFeignException</span><wbr><span class="parameters">(feign.FeignException&nbsp;e,
 jakarta.servlet.http.HttpServletRequest&nbsp;request)</span></div>
<div class="block">Handles exceptions of type <code>FeignException</code> thrown during Feign client calls in the context of patient management.
 This method analyzes the HTTP status code and error content to provide user-friendly feedback,
 such as validation errors, conflicts, or service unavailability. It also ensures the UI remains consistent
 by retrieving the latest patient data, notes, and risk level when possible.

 <p><strong>Processing Steps:</strong></p>
 <ol>
   <li><strong>Critical Errors (500, 503):</strong> Redirects to a service unavailable handler.</li>
   <li><strong>Patient List Requests (/patients):</strong> Returns a view with an empty patient list and an error message.</li>
   <li><strong>Patient-Specific Requests (/update):</strong> Retrieves the patient ID from the request attributes,
       fetches the latest patient data, notes, and risk level, and processes the error response.</li>
   <li><strong>Validation Errors (400):</strong> Parses the error response to extract field-specific validation messages
       and returns them to the update view.</li>
   <li><strong>Conflict Errors (409):</strong> Extracts the conflict message and returns it to the appropriate view.</li>
   <li><strong>Other Errors:</strong> Redirects to the home page with a generic error message.</li>
 </ol>

 <p><strong>Error Handling:</strong></p>
 <ul>
   <li>Logs critical errors and redirects to a dedicated error handler for service unavailability.</li>
   <li>For validation errors, maps field-specific messages to the UI for user correction.</li>
   <li>For conflicts, extracts and displays the error message from the response body.</li>
   <li>For all other errors, redirects to the home page with a generic error message.</li>
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>e</code> - The <code>FeignException</code> thrown by the Feign client, containing the HTTP status and error details.</dd>
<dd><code>request</code> - The current <code>HttpServletRequest</code>, used to retrieve the patient context, target view,
                and request attributes (e.g., patient ID, new note).</dd>
<dt>Returns:</dt>
<dd>A <code>ModelAndView</code> object containing:
         <ul>
           <li>The patient data, notes, and risk level (if available).</li>
           <li>Field-specific validation errors (for 400 responses).</li>
           <li>Conflict or generic error messages (for 409 or other responses).</li>
           <li>A redirect to the home page for critical or unhandled errors.</li>
         </ul></dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><code>handleServiceUnavailable(FeignException, HttpServletRequest)</code></li>
<li><a href="../dto/ValidationErrorDTO.html" title="class in com.clientui.clientui.dto"><code>ValidationErrorDTO</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2026. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
